<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>React app dark and light theme toggle</title>
    <meta
      name="description"
      content="In this blog post, I'm going through one way to implement dark and light theme toggle to your React app."
      data-rh="true"
    />
    <meta
      name="keywords"
      content="React, CSS"
    >
    <meta
      name="author"
      content="Tapio Salonen"
    >
    <script type="text/javascript">
      // Single Page Apps for GitHub Pages
      // MIT License
      // https://github.com/rafgraph/spa-github-pages
      // This script takes the current url and converts the path and query
      // string into just a query string, and then redirects the browser
      // to the new url with only a query string and hash fragment,
      // e.g. https://www.foo.tld/one/two?a=b&c=d#qwe, becomes
      // https://www.foo.tld/?/one/two&a=b~and~c=d#qwe
      // Note: this 404.html file must be at least 512 bytes for it to work
      // with Internet Explorer (it is currently > 512 bytes)

      // If you're creating a Project Pages site and NOT using a custom domain,
      // then set pathSegmentsToKeep to 1 (enterprise users may need to set it to > 1).
      // This way the code will only replace the route part of the path, and not
      // the real directory in which the app resides, for example:
      // https://username.github.io/repo-name/one/two?a=b&c=d#qwe becomes
      // https://username.github.io/repo-name/?/one/two&a=b~and~c=d#qwe
      // Otherwise, leave pathSegmentsToKeep as 0.
      var pathSegmentsToKeep = 1;

      var l = window.location;
      l.replace(
        l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') +
        l.pathname.split('/').slice(0, 1 + pathSegmentsToKeep).join('/') + '/?/' +
        l.pathname.slice(1).split('/').slice(pathSegmentsToKeep).join('/').replace(/&/g, '~and~') +
        (l.search ? '&' + l.search.slice(1).replace(/&/g, '~and~') : '') +
        l.hash
      );

    </script>
  </head>
  <body>
    <noscript>
      <div id="menu-nav">
        <a class="menu-link" href="https://tsa-dom.github.io">Home</a>
        <a class="menu-link" href="https://tsa-dom.github.io/blog">Blog</a>
        <a class="menu-link" href="https://tsa-dom.github.io/pages/contributors">Contributors</a>
      </div>
      <div id="container">
        <h3 id="react-app-dark-and-light-theme-toggle">React app dark and light theme toggle.</h3>
<p>You can find an example app from <a href="https://github.com/tsa-dom/example-apps/tree/main/react/darkmode-example">here</a>.</p>
<p>In this blog post, I&#39;m going through one way to implement dark and light theme toggle to your React app. I decided to use CSS variables to change styles. All style properties to each theme, I defined in a theme.js file like so</p>
<pre><code class="language-jsx">export const themes = {
  dark: [
    { var: &#39;--background-color&#39;, value: &#39;rgb(40, 44, 52)&#39; },
    { var: &#39;--text-color&#39;, value: &#39;white&#39; },
    { var: &#39;--app-link-color&#39;, value: &#39;rgb(97, 218, 251)&#39; }
  ],
  light: [
    { var: &#39;--background-color&#39;, value: &#39;white&#39; },
    { var: &#39;--text-color&#39;, value: &#39;black&#39; },
    { var: &#39;--app-link-color&#39;, value: &#39;rgb(50, 178, 213)&#39; }
  ]
}
</code></pre>
<p>This approach makes it easier to iterate through all style properties and update them on one go. You only need to specify the theme as a function param.</p>
<pre><code class="language-jsx">// This function switches all CSS variable values with the selected theme values.
export const switchTheme = (themeName) =&gt; {
  localStorage.setItem(&#39;app-theme&#39;, themeName)
  themes[themeName].forEach(theme =&gt; {
    document.documentElement.style.setProperty(theme.var, theme.value)
  })
}
</code></pre>
<p>Next, you need to define CSS variables. Those variables are manipulated on runtime when the theme changes. You need to specify all defined variables to style definitions inside CSS files.</p>
<pre><code class="language-css">/* CSS-variable definitions */
:root {
  --background-color: rgb(40, 44, 52);
  --text-color: white;
  --app-link-color: rgb(97, 218, 251);
}

/* Styles that uses CSS variables are defined here */
.App-header {
  background-color: var(--background-color);
  color: var(--text-color);
  ...
}
.App-link {
  color: var(--app-link-color);
}
</code></pre>
<p>You can also store the current theme to local storage so a client can use it further when visiting the page next time.</p>
<p>This method is also reusable in other situations where you need conditional CSS rendering. You can hide specific elements in the DOM tree if a particular setting is activated.</p>
      </div>
      <style>
        #container {
          margin: auto;
          max-width: 700px;
          font-size: 20px;
          margin-top: 30px;
        }
        body {
          margin: 0;
          font-family: sans-serif;
        }
        #menu-nav {
          width: 100%;
          min-height: 50px;
          background-color: black;
          color: white;
          text-align: center;
          font-size: 30px;
          padding-top: 10px;
        }
        .menu-link {
          padding: 20px;
          color: white !important;
        }
        .menu-link:hover {
          color: grey !important
        }
      </style>
    </noscript>
  </body>
</html>
